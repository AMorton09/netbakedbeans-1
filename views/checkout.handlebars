<div class="page-header">
  {{>bsnavbar2}}
  <style>
    * {
 color: white;
}
</style>

<h3>Checkout</h3>
<br><br>

{{#each movies}}
<body onload="getPrice();"> </body>


<table bgcolor="grey" cellpadding="10">

  <tr>
    <th bgcolor="white">Title</th>
    <th bgcolor="white">Description</th>
    <th bgcolor="white">Price</th>
  </tr>
  <tr>
    <td bgcolor="grey" width="15%">{{this.title}}</td>
    <td bgcolor="grey" width="70%">{{this.description}}</td>
    <td bgcolor="grey" width="15%">{{this.rental_rate}}</td>
    <form method="post" action="/removefromcheckout">
       <input name="cart_id" type="hidden" value="{{this.cart_id}}"/>
      <td bgcolor="grey" width="15%"><button  type="submit"class="btn btn-default">  X  </button></td>
    </form>
  </tr>
</table>
{{/each}}
<br><br>
<strong>Price:</strong>
<p id="price"> </p>
<br><br>

<form method="post" action="/checkoutfinal">
      <input id="items" name="numberofitems" type="hidden" value=""/>
      <td bgcolor="grey" width="15%"><button  type="submit"class="btn btn-default">  Finalize Payment  </button>
</form>

</div>
<script>	
	
	function getPrice(){
		var checkoutPrice = 0; 
		{{#each movies}}
		
		checkoutPrice += {{this.rental_rate}}
		document.getElementById("price").innerHTML = checkoutPrice.toFixed(2);
			{{/each}}
	}

</script>


 <script>
  var checkoutItems = 0;
  {{#each movies}}
    checkoutItems += 1;
  {{/each}}
  document.getElementById('items').value = checkoutItems;
</script>

