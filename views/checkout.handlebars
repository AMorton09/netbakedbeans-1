<div class="page-header">
  {{>bsnavbar2}}
  <style>
      * {
   color: white;
  }
  input{
    color : black;
  }
  td {
  color: black;
  }
  </style>
<h3>Checkout</h3>
<br><br>

{{#each movies}}
<body onload="getPrice();"> </body>


<table bgcolor="grey" cellpadding="10">

  <tr>
    <th bgcolor="black">Title</th>
    <th bgcolor="black">Description</th>
    <th bgcolor="black">Price</th>
  </tr>
  <tr>
    <td bgcolor="grey" width="25%">{{this.title}}</td>
    <td bgcolor="grey" width="50%">{{this.description}}</td>
    <td bgcolor="grey" width="25%">{{this.rental_rate}}</td>

  </tr>
</table>
{{/each}}
<br><br>
<strong>Price:</strong>
<p id="price"> </p>
<br><br>

<form method="post" action="/checkoutfinal">
      <input id="items" name="numberofitems" type="hidden" value=""/>
      <input id="revenue" name="revenue" type="hidden" value=""/>
      <td bgcolor="grey" width="15%"><button  type="submit"class="btn btn-default">  Finalize Payment  </button>
</form>

</div>
<script>

	function getPrice(){
		var checkoutPrice = 0;
		{{#each movies}}

		checkoutPrice += {{this.rental_rate}}
		document.getElementById("price").innerHTML = checkoutPrice.toFixed(2);
			{{/each}}
    document.getElementById('revenue').value = checkoutPrice.toFixed(2);
	}

</script>


 <script>
  var checkoutItems = 0;
  {{#each movies}}
    checkoutItems += 1;
  {{/each}}
  document.getElementById('items').value = checkoutItems;
</script>
